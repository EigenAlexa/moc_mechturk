<template name="home">

  <head>
    <title>Unfair Coin Game</title>
  </head>
   <div class="alert alert-info fade in">Please accept the HIT to continue. </div>
   {{> info}}
   <a href="/experiment"><button type="button" class="btn btn-primary">Start</button></a>
</template>


<template name="info">
  <div class="page-header">
    <h2>How to play</h2>
  </div>
    <p>1. You will be arranged to a random table with random workers.</p>
    <p>2. You share the public information with others.</p>
    <p>3. You have private information that only you can access.</p>
    <p>4. Submit a guess for the possibility of the coin in the end.</p>
  <div class="page-header">
    <h2>Q &amp; A</h2>
  </div>
    <p>Q: Can I share my private information with others?</p>
    <p>A: No.</p>
    <p>Q: Can I submit whenever I am ready?</p>
    <p>A: Yes.</p>
    <p>Q: Strategy to get max bonus?</p>
    <p>A: Depends... </p>
  <img src="img/flip-a-coin.gif" class="img-rounded" alt="Flip a coin" width="304" height="236">
</template>


<template name="experiment">
  
  <head>
    <title>Unfair Coin</title>
    <link href='css/coin.css' rel="stylesheet">
    <script type="text/javascript" src="js/coin.js"></script>
  </head>

  <body>
    <h1>Welcome to Unfair Coin Game!</h1>
   
     <div id="coin-flip-table">
     <img src='img/table.png' style='width:100%'/>
     {{> coin}}
     
     <div class="public-board">
     <h3>Public: {{#each games gameId}} {{publicData}} {{/each}}</h3>
     </div>
     
     <div class="private-board">
     <h3>Private: {{#each players currentUser._id}} 
          {{#each privateData}}
              <span id="flip-{{@index}}" class="item" data-value="{{@index}}">{{this}}</span>
          {{/each}}
       {{/each}}
     </h3>
     </div>
     
     </div>
  
    
    {{> controller}}
    
    <hr/>
    
      <!--<h1>Data</h1>
      <h3>Public Data:</h3>
      <div class="col-md-12">
        <div class="alert alert-info">
        <p>{{#each games gameId}} {{publicData}} {{/each}}
        </p>
        </div>
      </div>
      
      <h3>Players:</h3> {{> userTable}}
      
      <hr/>
      
      <h3>Private Data for {{currentUser.username}}:</h3>
      <div class="col-md-12">
        <div class="alert alert-info"> 
        <p>{{#each players currentUser._id}} {{privateData}} {{/each}}</p>
        </div>
      </div>-->
    
  </body>
</template>
  
<template name="coin">
  <div id="coin-flip-cont">
    <div id="coin">
      <div class="front"> <img src="img/coin-head.png" class="img-rounded" alt="coin-head" width="100" height="100"></div>
      <div class="back"> <img src="img/coin-tail.jpg" class="img-rounded" alt="coin-tail" width="100" height="100"></div>
    </div>
  </div>
  <audio controls id="link-coin-audio" class="hide">
    <source src="sound/coin-drop.mp3" type="audio/mpeg">
    Muted.
  </audio>
</template>

<template name="controller">
    <div class="controller">
      <h4>You've flip the coin {{counter}} times.</h4>
      <button id="flip" class="btn btn-success btn-lg" onclick="showNextFlip({{counter}})">Flip</button>
     
      {{> guessForm}}
    </div>
</template>

<template name="guessForm">
  <form id="guess" name="guessForm" class="guess">
      <h4>Guess possibility:</h4>
      <br/>
      <input id="guess-slider" name="slider" type="range" min="0" max="100" value="0" step="1" onchange="showValue(this.value)" />
      <h3><span id="range">0</span></h3>
      <br/>
      <input id="submit" type="submit" class="btn btn-info btn-lg disabled"/>
  </form>
</template>



<template name="userTable">
  <div class="col-md-12">
    <div class="alert alert-info">
      {{#each userList}}
      <span class="badge">{{username}}</span> 
      {{/each}}  
     <!--      
      {{#each playerList}}
      <span class="badge">{{uid}}</span> 
      {{/each}}
      -->
    </div>
  </div>
</template>


<template name="survey">
  <form class="survey">
    <p>Was there anything confusing about this HIT?</p>
    <textarea name="confusing" rows="3"></textarea><br/>
    <p>Do you have any feedback for us?</p>
    <textarea name="feedback" rows="3"></textarea><br/>
    <button type="submit">Submit the HIT</button>
  </form>
</template>